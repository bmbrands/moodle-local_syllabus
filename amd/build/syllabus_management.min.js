define ("local_syllabus/syllabus_management",["jquery","core/ajax","core/str","core/notification","core/sortable_list"],function(a,b,c,d,e){return{init:function init(){var f=new e(a("#syllabus-management .location-list tbody"),{moveHandlerSelector:".movefield [data-drag-type=move]"}),g=function(a){return a.closest("[data-location-id]").attr("data-value")},h=function(b){b.stopPropagation();c.get_string("therearenofields","core_customfield").then(function(b){a("#syllabus-management .location-list").children().each(function(){var c=a(this).find(a(".field")),d=a(this).find(a(".nofields"));if(!c.length&&!d.length){a(this).find("tbody").append("<tr class=\"nofields\"><td colspan=\"5\">"+b+"</td></tr>")}if(c.length&&d.length){d.remove()}});return null}).fail(d.exception)},i=function(a,c){a.stopPropagation();if(c.positionChanged){var e=c.element.data("field-id"),f=c.targetList.closest("[data-location-id]").attr("data-location-id"),g=c.targetNextElement.data("field-id"),h=b.call([{methodname:"local_syllabus_move_field_to_location",args:{fieldid:e,location:f,beforeid:g}}]);h[0].fail(d.exception)}};f.getDestinationName=function(b,d){if(!d.length){return c.get_string("totopofcategory","local_syllabus",g(b))}else if(d.attr("data-field-name")){return c.get_string("afterfield","local_syllabus",d.attr("data-field-name"))}else{return a.Deferred().resolve("")}};a("[data-field-name]").on("sortablelist-drop",function(a,b){i(a,b)}).on("sortablelist-drag",function(a){h(a)});a("[data-field-name]").on("sortablelist-dragstart",function(b,c){setTimeout(function(){a(".sortable-list-is-dragged").width(c.element.width())},501)});a("[data-role=removefield]").on("click",function(c){var e=a(this).attr("data-id");b.call([{methodname:"local_syllabus_move_field_to_location",args:{fieldid:e,location:"none",beforeid:0}}])[0].then(function(){window.location.reload()}).fail(d.exception);c.preventDefault()})}}});
//# sourceMappingURL=syllabus_management.min.js.map
